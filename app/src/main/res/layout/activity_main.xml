<?xml version="1.0" encoding="utf-8"?>
<androidx.constraintlayout.widget.ConstraintLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@color/toss_bg">

    <FrameLayout
        android:id="@+id/main_container"
        android:layout_width="match_parent"
        android:layout_height="0dp"
        app:layout_constraintTop_toTopOf="parent"
        app:layout_constraintBottom_toTopOf="@id/bottom_navigation">

        <!-- 홈 화면 -->
        <ScrollView
            android:id="@+id/layout_home"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:background="@drawable/bg_home_gra"
            android:fillViewport="true"
            android:visibility="visible">

            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:orientation="vertical"
                android:paddingHorizontal="24dp"
                android:paddingTop="30dp"
                android:paddingBottom="40dp">

                <ImageView
                    android:layout_width="48dp"
                    android:layout_height="48dp"
                    android:layout_gravity="center"
                    android:layout_marginTop="24dp"
                    android:layout_marginBottom="16dp"
                    android:src="@drawable/background_shadow"
                    app:tint="@color/toss_red" />

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_gravity="center"
                    android:layout_marginBottom="8dp"
                    android:letterSpacing="-0.03"
                    android:text="RiskManager"
                    android:textColor="@color/toss_text_main"
                    android:textSize="28sp"
                    android:textStyle="bold" />

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_gravity="center"
                    android:layout_marginBottom="40dp"
                    android:letterSpacing="-0.02"
                    android:lineSpacingExtra="6dp"
                    android:text="리스크를 사전에 예측하고 예방하세요"
                    android:textColor="@color/toss_text_sub"
                    android:textSize="16sp" />

                <LinearLayout
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:layout_marginBottom="30dp"
                    android:background="@drawable/bg_card"
                    android:orientation="vertical"
                    android:paddingVertical="10dp">

                    <LinearLayout
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:gravity="center_vertical"
                        android:orientation="horizontal"
                        android:padding="20dp">

                        <ImageView
                            android:layout_width="24dp"
                            android:layout_height="24dp"
                            android:layout_marginEnd="16dp"
                            android:src="@drawable/arrow"
                            app:tint="@color/toss_red" />

                        <LinearLayout
                            android:layout_width="match_parent"
                            android:layout_height="wrap_content"
                            android:orientation="vertical">

                            <TextView
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:letterSpacing="-0.02"
                                android:text="10분만에 아이디어 완성"
                                android:textColor="@color/toss_text_main"
                                android:textSize="16sp"
                                android:textStyle="bold" />

                            <TextView
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:layout_marginTop="2dp"
                                android:text="구체적인 실행 플랜을 자동으로 생성"
                                android:textColor="@color/toss_text_sub"
                                android:textSize="13sp" />
                        </LinearLayout>
                    </LinearLayout>

                    <View
                        android:layout_width="match_parent"
                        android:layout_height="1dp"
                        android:layout_marginHorizontal="20dp"
                        android:background="#F2F4F6" />

                    <LinearLayout
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:gravity="center_vertical"
                        android:orientation="horizontal"
                        android:padding="20dp">

                        <ImageView
                            android:layout_width="24dp"
                            android:layout_height="24dp"
                            android:layout_marginEnd="16dp"
                            android:src="@drawable/ic_info"
                            app:tint="#3182F6" />

                        <LinearLayout
                            android:layout_width="match_parent"
                            android:layout_height="wrap_content"
                            android:orientation="vertical">

                            <TextView
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:letterSpacing="-0.02"
                                android:text="검증된 분석기법 사용"
                                android:textColor="@color/toss_text_main"
                                android:textSize="16sp"
                                android:textStyle="bold" />

                            <TextView
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:layout_marginTop="2dp"
                                android:text="객관적 판단으로, 고도화 리스크 분석을 사용"
                                android:textColor="@color/toss_text_sub"
                                android:textSize="13sp" />
                        </LinearLayout>
                    </LinearLayout>

                    <View
                        android:layout_width="match_parent"
                        android:layout_height="1dp"
                        android:layout_marginHorizontal="20dp"
                        android:background="#F2F4F6" />

                    <LinearLayout
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:gravity="center_vertical"
                        android:orientation="horizontal"
                        android:padding="20dp">

                        <ImageView
                            android:layout_width="24dp"
                            android:layout_height="24dp"
                            android:layout_marginEnd="16dp"
                            android:src="@drawable/ic_doc"
                            app:tint="#10B981" />

                        <LinearLayout
                            android:layout_width="match_parent"
                            android:layout_height="wrap_content"
                            android:orientation="vertical">

                            <TextView
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:letterSpacing="-0.02"
                                android:text="보고서 기능"
                                android:textColor="@color/toss_text_main"
                                android:textSize="16sp"
                                android:textStyle="bold" />

                            <TextView
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:layout_marginTop="2dp"
                                android:text="분석 결과를 저장하고 언제든 다시 확인"
                                android:textColor="@color/toss_text_sub"
                                android:textSize="13sp" />
                        </LinearLayout>
                    </LinearLayout>
                </LinearLayout>

                <com.google.android.material.button.MaterialButton
                    android:id="@+id/btn_go_input"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:layout_marginBottom="12dp"
                    android:backgroundTint="@color/toss_red"
                    android:letterSpacing="-0.02"
                    android:paddingVertical="16dp"
                    android:text="새 프로젝트 분석하기"
                    android:textSize="17sp"
                    android:textStyle="bold"
                    app:cornerRadius="24dp" />

                <com.google.android.material.button.MaterialButton
                    android:id="@+id/btn_go_history"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:backgroundTint="#F9FAFB"
                    android:letterSpacing="-0.02"
                    android:paddingVertical="16dp"
                    android:text="분석 이력 보기"
                    android:textColor="@color/toss_text_sub"
                    android:textSize="16sp"
                    android:textStyle="bold"
                    app:cornerRadius="24dp"
                    app:elevation="0dp"
                    app:strokeColor="#00000000" />

            </LinearLayout>
        </ScrollView>

        <!-- 아이디어 입력 화면 -->
        <ScrollView
            android:id="@+id/layout_input"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:background="#FFFFFF"
            android:fillViewport="true"
            android:visibility="gone">

            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:orientation="vertical"
                android:padding="24dp">

                <LinearLayout
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:layout_marginTop="20dp"
                    android:layout_marginBottom="40dp"
                    android:gravity="center_vertical"
                    android:orientation="horizontal">

                    <ImageButton
                        android:id="@+id/btn_back_home"
                        android:layout_width="32dp"
                        android:layout_height="32dp"
                        android:layout_marginEnd="8dp"
                        android:background="?attr/selectableItemBackgroundBorderless"
                        android:src="@drawable/ic_back"
                        app:tint="@color/toss_text_main" />
                </LinearLayout>

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_gravity="center"
                    android:layout_marginBottom="24dp"
                    android:letterSpacing="-0.03"
                    android:lineSpacingExtra="6dp"
                    android:text="어떤 아이디어를 분석할까요?"
                    android:textColor="@color/toss_text_main"
                    android:textSize="26sp"
                    android:textStyle="bold" />

                <EditText
                    android:id="@+id/et_concept"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:layout_marginBottom="32dp"
                    android:background="@drawable/bg_toss_input"
                    android:gravity="top"
                    android:hint="예) 20대를 위한 비건 화장품 구독 서비스"
                    android:minHeight="120dp"
                    android:padding="20dp"
                    android:textColorHint="#B0B8C1"
                    android:textSize="16sp" />

                <LinearLayout
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:layout_marginBottom="12dp"
                    android:gravity="center_vertical"
                    android:orientation="horizontal">

                    <TextView
                        android:layout_width="0dp"
                        android:layout_height="wrap_content"
                        android:layout_weight="1"
                        android:text="초기 자본금"
                        android:textColor="@color/toss_text_main"
                        android:textSize="16sp"
                        android:textStyle="bold" />

                    <TextView
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_marginEnd="8dp"
                        android:text="미정"
                        android:textColor="@color/toss_text_sub"
                        android:textSize="14sp" />

                    <androidx.appcompat.widget.SwitchCompat
                        android:id="@+id/switch_capital_unknown"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content" />

                </LinearLayout>

                <FrameLayout
                    android:id="@+id/layout_capital_input"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:layout_marginBottom="40dp"
                    android:background="@drawable/bg_toss_input"
                    android:paddingHorizontal="20dp">

                    <EditText
                        android:id="@+id/et_capital"
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:background="@null"
                        android:hint="예) 500"
                        android:inputType="number"
                        android:maxLength="13"
                        android:paddingVertical="20dp"
                        android:textColorHint="#B0B8C1"
                        android:textSize="18sp"
                        android:textStyle="bold" />

                    <TextView
                        android:id="@+id/tv_capital_unit"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_gravity="end|center_vertical"
                        android:text="만원"
                        android:textColor="@color/toss_text_sub"
                        android:textSize="18sp"
                        android:visibility="gone" />
                </FrameLayout>

                <Space
                    android:layout_width="match_parent"
                    android:layout_height="0dp"
                    android:layout_weight="1" />

                <com.google.android.material.button.MaterialButton
                    android:id="@+id/btn_generate_questions"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:backgroundTint="@color/toss_red"
                    android:paddingVertical="16dp"
                    android:text="구체화 질문 생성"
                    android:textSize="17sp"
                    android:textStyle="bold"
                    app:cornerRadius="24dp" />

            </LinearLayout>
        </ScrollView>

        <!-- 질문 답변 화면 -->
        <androidx.constraintlayout.widget.ConstraintLayout
            android:id="@+id/layout_clarification"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:background="#F2F4F6"
            android:visibility="gone">

            <LinearLayout
                android:id="@+id/header_clarification"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:orientation="vertical"
                android:paddingHorizontal="24dp"
                android:paddingTop="20dp"
                android:paddingBottom="20dp"
                app:layout_constraintTop_toTopOf="parent">

                <ImageButton
                    android:id="@+id/btn_back_clarification"
                    android:layout_width="32dp"
                    android:layout_height="32dp"
                    android:layout_marginBottom="24dp"
                    android:background="?attr/selectableItemBackgroundBorderless"
                    android:src="@drawable/ic_back"
                    app:tint="@color/toss_text_main" />

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:lineSpacingExtra="6dp"
                    android:text="프로젝트 구체화"
                    android:textColor="@color/toss_text_main"
                    android:textSize="26sp"
                    android:textStyle="bold" />

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_marginTop="8dp"
                    android:text="더 정확한 분석을 위해 AI가 생성한 질문에 답변해주세요."
                    android:textColor="@color/toss_text_sub" />
            </LinearLayout>

            <ScrollView
                android:id="@+id/scroll_clarification"
                android:layout_width="match_parent"
                android:layout_height="0dp"
                android:clipToPadding="false"
                android:paddingBottom="120dp"
                app:layout_constraintBottom_toBottomOf="parent"
                app:layout_constraintTop_toBottomOf="@id/header_clarification">

                <LinearLayout
                    android:id="@+id/container_questions"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:orientation="vertical"
                    android:paddingHorizontal="24dp" />

            </ScrollView>

            <LinearLayout
                android:id="@+id/footer_clarification"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:background="#F9FAFB"
                android:padding="24dp"
                app:layout_constraintBottom_toBottomOf="parent">

                <com.google.android.material.button.MaterialButton
                    android:id="@+id/btn_submit_answers"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:backgroundTint="@color/toss_red"
                    android:paddingVertical="16dp"
                    android:text="최종 분석 시작하기"
                    android:textSize="17sp"
                    android:textStyle="bold"
                    app:cornerRadius="24dp" />
            </LinearLayout>

        </androidx.constraintlayout.widget.ConstraintLayout>

        <!-- 로딩 화면 -->
        <LinearLayout
            android:id="@+id/layout_loading"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:background="#FFFFFF"
            android:clickable="true"
            android:gravity="center"
            android:orientation="vertical"
            android:visibility="gone">

            <ProgressBar
                android:layout_width="60dp"
                android:layout_height="60dp"
                android:indeterminateTint="@color/toss_red" />

            <TextView
                android:id="@+id/tv_loading_text"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginTop="24dp"
                android:gravity="center"
                android:text="AI가 분석하고 있어요"
                android:textColor="@color/toss_text_main"
                android:textSize="18sp"
                android:textStyle="bold" />
        </LinearLayout>

        <!-- 결과 화면 -->
        <androidx.constraintlayout.widget.ConstraintLayout
            android:id="@+id/layout_result"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:background="@color/toss_bg"
            android:visibility="gone">

            <LinearLayout
                android:id="@+id/header_result"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:orientation="vertical"
                android:paddingHorizontal="24dp"
                android:paddingTop="20dp"
                android:paddingBottom="10dp"
                app:layout_constraintTop_toTopOf="parent">

                <ImageButton
                    android:id="@+id/btn_back_result"
                    android:layout_width="32dp"
                    android:layout_height="32dp"
                    android:layout_marginBottom="16dp"
                    android:background="?attr/selectableItemBackgroundBorderless"
                    android:src="@drawable/ic_back"
                    app:tint="@color/toss_text_main" />

                <TextView
                    android:id="@+id/tv_res_title"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="분석 결과"
                    android:textColor="@color/toss_text_main"
                    android:textSize="26sp"
                    android:textStyle="bold" />
            </LinearLayout>

            <ScrollView
                android:id="@+id/scroll_result"
                android:layout_width="match_parent"
                android:layout_height="0dp"
                android:clipToPadding="false"
                android:paddingBottom="120dp"
                app:layout_constraintBottom_toBottomOf="parent"
                app:layout_constraintTop_toBottomOf="@id/header_result">

                <LinearLayout
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:orientation="vertical"
                    android:paddingHorizontal="24dp">

                    <com.google.android.material.card.MaterialCardView
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:layout_marginTop="16dp"
                        android:layout_marginBottom="24dp"
                        app:cardCornerRadius="20dp"
                        app:cardElevation="0dp">

                        <TextView
                            android:id="@+id/tv_idea_summary"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:padding="20dp"
                            android:textColor="@color/toss_text_main"
                            android:textSize="16sp"
                            android:textStyle="bold"
                            android:visibility="gone"
                            tools:text="사용자 아이디어 한 줄 요약" />
                    </com.google.android.material.card.MaterialCardView>

                    <!-- RPN 스코어 -->
                    <com.google.android.material.card.MaterialCardView
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:layout_marginBottom="24dp"
                        app:cardBackgroundColor="#FFFFFF"
                        app:cardCornerRadius="16dp"
                        app:cardElevation="2dp"
                        app:strokeColor="#E5E7EB"
                        app:strokeWidth="1dp">

                        <LinearLayout
                            android:layout_width="match_parent"
                            android:layout_height="wrap_content"
                            android:gravity="center_horizontal"
                            android:orientation="vertical"
                            android:padding="24dp">

                            <TextView
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:layout_marginBottom="16dp"
                                android:text="위험 우선 순위 점수 (RPN)"
                                android:textColor="@color/toss_text_sub"
                                android:textSize="16sp" />

                            <TextView
                                android:id="@+id/tv_res_rpn"
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:textColor="@color/toss_text_main"
                                android:textSize="52sp"
                                android:textStyle="bold"
                                tools:text="720" />

                            <TextView
                                android:id="@+id/tv_res_rpn_max"
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:layout_marginBottom="16dp"
                                android:textColor="@color/toss_text_sub"
                                android:textSize="10sp"
                                tools:text="/ 1000점" />

                            <TextView
                                android:id="@+id/tv_rpn_conclusion"
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:textColor="@color/toss_text_main"
                                android:textSize="16sp"
                                android:textStyle="bold"
                                tools:text="아이디어는 좋으나, 위험성이 높습니다" />

                        </LinearLayout>
                    </com.google.android.material.card.MaterialCardView>

                    <!-- RPN 상세 분석 -->
                    <com.google.android.material.card.MaterialCardView
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:layout_marginBottom="24dp"
                        app:cardBackgroundColor="#FFFFFF"
                        app:cardCornerRadius="16dp"
                        app:cardElevation="2dp"
                        app:strokeColor="#E5E7EB"
                        app:strokeWidth="1dp">

                        <LinearLayout
                            android:layout_width="match_parent"
                            android:layout_height="wrap_content"
                            android:orientation="vertical"
                            android:padding="24dp">

                            <TextView
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:layout_marginBottom="16dp"
                                android:text="RPN 상세 분석 ( S x O x D )"
                                android:textColor="@color/toss_text_main"
                                android:textSize="18sp"
                                android:textStyle="bold" />

                            <TextView
                                android:id="@+id/tv_sod_analysis"
                                android:layout_width="match_parent"
                                android:layout_height="wrap_content"
                                android:lineSpacingExtra="6dp"
                                android:textColor="@color/toss_text_main"
                                android:textSize="15sp"
                                tools:text="- 심각도(S): 8점 \n- 발생도(O): 9점 \n- 검출도(D): 10점" />
                        </LinearLayout>
                    </com.google.android.material.card.MaterialCardView>

                    <!-- 최종 예상 예산 분석 -->
                    <com.google.android.material.card.MaterialCardView
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:layout_marginBottom="24dp"
                        app:cardBackgroundColor="#FFFFFF"
                        app:cardCornerRadius="16dp"
                        app:cardElevation="2dp"
                        app:strokeColor="#E5E7EB"
                        app:strokeWidth="1dp">

                        <LinearLayout
                            android:layout_width="match_parent"
                            android:layout_height="wrap_content"
                            android:orientation="vertical"
                            android:padding="24dp">

                            <TextView
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:layout_marginBottom="4dp"
                                android:text="최종 예상 예산 분석"
                                android:textColor="@color/toss_text_main"
                                android:textSize="18sp"
                                android:textStyle="bold" />

                            <TextView
                                android:id="@+id/tv_res_loss"
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:layout_marginBottom="16dp"
                                android:textColor="@color/toss_red"
                                android:textSize="32sp"
                                android:textStyle="bold"
                                tools:text="₩5,040,000" />

                            <TextView
                                android:id="@+id/tv_loss_analysis"
                                android:layout_width="match_parent"
                                android:layout_height="wrap_content"
                                android:lineSpacingExtra="6dp"
                                android:textColor="@color/toss_text_main"
                                android:textSize="15sp"
                                tools:text="- 업계 표준 진입 자본금: ₩15,000,000\n- 초기 자본금(추정): ₩10,000,000 \n- RPN 가중치: 0.72 \n- 시장 변동성(α): 0.7" />
                        </LinearLayout>
                    </com.google.android.material.card.MaterialCardView>

                    <!-- 실행 액션 플랜 -->
                    <com.google.android.material.card.MaterialCardView
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:layout_marginBottom="24dp"
                        app:cardBackgroundColor="#FFFFFF"
                        app:cardCornerRadius="16dp"
                        app:cardElevation="2dp"
                        app:strokeColor="#E5E7EB"
                        app:strokeWidth="1dp">

                        <LinearLayout
                            android:layout_width="match_parent"
                            android:layout_height="wrap_content"
                            android:orientation="vertical"
                            android:padding="24dp">

                            <TextView
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:layout_marginBottom="16dp"
                                android:text="AI의 실행 조언 (Action Plan)"
                                android:textColor="@color/toss_text_main"
                                android:textSize="18sp"
                                android:textStyle="bold" />

                            <LinearLayout
                                android:id="@+id/container_action_plan"
                                android:layout_width="match_parent"
                                android:layout_height="wrap_content"
                                android:orientation="vertical" />

                            <com.google.android.material.button.MaterialButton
                                android:id="@+id/btn_sbiz_chatbot"
                                android:layout_width="match_parent"
                                android:layout_height="wrap_content"
                                android:layout_marginBottom="16dp"
                                android:backgroundTint="#4CAF50"
                                android:paddingVertical="12dp"
                                android:text="소상공인 챗봇 연결하기"
                                android:textSize="14sp"
                                app:cornerRadius="30dp"
                                app:iconGravity="textStart" />

                        </LinearLayout>
                    </com.google.android.material.card.MaterialCardView>

                    <!-- [추가] 최적의 분석 기법 추천 -->
                    <com.google.android.material.card.MaterialCardView
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:layout_marginBottom="16dp"
                        app:cardBackgroundColor="#FFFFFF"
                        app:cardCornerRadius="16dp"
                        app:cardElevation="2dp"
                        app:strokeColor="#E5E7EB"
                        app:strokeWidth="1dp">

                        <LinearLayout
                            android:layout_width="match_parent"
                            android:layout_height="wrap_content"
                            android:orientation="vertical"
                            android:padding="24dp">

                            <TextView
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:layout_marginBottom="16dp"
                                android:text="최적의 분석 기법 추천"
                                android:textColor="@color/toss_text_main"
                                android:textSize="18sp"
                                android:textStyle="bold" />

                            <LinearLayout
                                android:id="@+id/container_recommended_methods"
                                android:layout_width="match_parent"
                                android:layout_height="wrap_content"
                                android:orientation="vertical" />

                        </LinearLayout>
                    </com.google.android.material.card.MaterialCardView>


                    <!-- 종합 보고서 -->
                    <com.google.android.material.card.MaterialCardView
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:layout_marginBottom="24dp"
                        app:cardBackgroundColor="#FFFFFF"
                        app:cardCornerRadius="16dp"
                        app:cardElevation="2dp"
                        app:strokeColor="#E5E7EB"
                        app:strokeWidth="1dp">

                        <LinearLayout
                            android:layout_width="match_parent"
                            android:layout_height="wrap_content"
                            android:orientation="vertical"
                            android:padding="24dp">

                            <TextView
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:layout_marginBottom="16dp"
                                android:text="종합 보고서"
                                android:textColor="@color/toss_text_main"
                                android:textSize="18sp"
                                android:textStyle="bold" />

                            <com.google.android.material.button.MaterialButtonToggleGroup
                                android:id="@+id/toggle_report_group"
                                android:layout_width="match_parent"
                                android:layout_height="wrap_content"
                                android:layout_marginBottom="16dp"
                                app:selectionRequired="true"
                                app:singleSelection="true">

                                <Button
                                    android:id="@+id/btn_report_summary"
                                    style="?attr/materialButtonOutlinedStyle"
                                    android:layout_width="0dp"
                                    android:layout_height="wrap_content"
                                    android:layout_weight="1"
                                    android:text="종합" />

                                <Button
                                    android:id="@+id/btn_report_pessimist"
                                    style="?attr/materialButtonOutlinedStyle"
                                    android:layout_width="0dp"
                                    android:layout_height="wrap_content"
                                    android:layout_weight="1"
                                    android:text="비관론" />

                                <Button
                                    android:id="@+id/btn_report_optimist"
                                    style="?attr/materialButtonOutlinedStyle"
                                    android:layout_width="0dp"
                                    android:layout_height="wrap_content"
                                    android:layout_weight="1"
                                    android:text="낙관론" />

                            </com.google.android.material.button.MaterialButtonToggleGroup>


                            <TextView
                                android:id="@+id/tv_report_content"
                                android:layout_width="match_parent"
                                android:layout_height="wrap_content"
                                android:lineSpacingExtra="6dp"
                                android:textColor="@color/toss_text_main"
                                android:textSize="15sp"
                                tools:text="비관론과 낙관론의 핵심을 종합한 최종 결론이 여기에 표시됩니다." />

                            <View
                                android:layout_width="match_parent"
                                android:layout_height="1dp"
                                android:layout_marginTop="16dp"
                                android:layout_marginBottom="12dp"
                                android:background="#E5E7EB" />

                            <TextView
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:layout_marginBottom="8dp"
                                android:text="참고 출처"
                                android:textColor="@color/toss_text_main"
                                android:textSize="14sp"
                                android:textStyle="bold" />

                            <LinearLayout
                                android:id="@+id/container_sources"
                                android:layout_width="match_parent"
                                android:layout_height="wrap_content"
                                android:orientation="vertical" />


                        </LinearLayout>
                    </com.google.android.material.card.MaterialCardView>

                </LinearLayout>
            </ScrollView>

            <LinearLayout
                android:id="@+id/footer_result"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:background="#F9FAFB"
                android:padding="24dp"
                app:layout_constraintBottom_toBottomOf="parent">

                <com.google.android.material.button.MaterialButton
                    android:id="@+id/btn_save_result"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:backgroundTint="@color/toss_red"
                    android:paddingVertical="16dp"
                    android:text="완료"
                    android:textSize="17sp"
                    android:textStyle="bold"
                    app:cornerRadius="24dp" />

            </LinearLayout>

        </androidx.constraintlayout.widget.ConstraintLayout>

        <!-- 이력 화면 -->
        <LinearLayout
            android:id="@+id/layout_history"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:background="@color/toss_bg"
            android:orientation="vertical"
            android:padding="24dp"
            android:visibility="gone">

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginTop="20dp"
                android:layout_marginBottom="16dp"
                android:text="분석 이력"
                android:textColor="@color/toss_text_main"
                android:textSize="26sp"
                android:textStyle="bold" />

            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_marginBottom="16dp"
                android:gravity="center_vertical"
                android:orientation="horizontal">

                <EditText
                    android:id="@+id/et_search_history"
                    android:layout_width="0dp"
                    android:layout_height="wrap_content"
                    android:layout_weight="1"
                    android:background="@drawable/bg_card"
                    android:hint="아이디어 검색..."
                    android:padding="16dp"
                    android:textSize="15sp" />

                <ImageButton
                    android:id="@+id/btn_search_history"
                    android:layout_width="48dp"
                    android:layout_height="48dp"
                    android:background="?attr/selectableItemBackgroundBorderless"
                    android:src="@android:drawable/ic_menu_search"
                    app:tint="@color/toss_text_sub" />

            </LinearLayout>

            <ScrollView
                android:id="@+id/scroll_history"
                android:layout_width="match_parent"
                android:layout_height="match_parent">

                <LinearLayout
                    android:id="@+id/container_history"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:orientation="vertical" />
            </ScrollView>

        </LinearLayout>

        <!-- 설정 화면 -->
        <ScrollView
            android:id="@+id/layout_settings"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:background="@color/toss_bg"
            android:visibility="gone">

            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:background="@color/toss_bg"
                android:orientation="vertical"
                android:padding="24dp">

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_marginTop="20dp"
                    android:layout_marginBottom="24dp"
                    android:text="설정"
                    android:textColor="@color/toss_text_main"
                    android:textSize="26sp"
                    android:textStyle="bold" />

                <!-- 공식/이론 설명 버튼 -->
                <com.google.android.material.button.MaterialButton
                    android:id="@+id/btn_go_theory"
                    style="@style/Widget.MaterialComponents.Button.OutlinedButton"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:layout_marginBottom="20dp"
                    android:gravity="start|center_vertical"
                    android:paddingVertical="20dp"
                    android:text="공식 및 이론 설명"
                    android:textColor="@color/toss_text_main"
                    android:textSize="16sp"
                    app:icon="@drawable/ic_info"
                    app:iconPadding="16dp"
                    app:iconTint="@color/toss_text_sub" />

                <!-- 앱 정보 -->
                <LinearLayout
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:layout_marginBottom="20dp"
                    android:background="@drawable/bg_card"
                    android:orientation="vertical"
                    android:padding="24dp">

                    <TextView
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_marginBottom="16dp"
                        android:text="앱 정보"
                        android:textColor="@color/toss_text_main"
                        android:textSize="16sp"
                        android:textStyle="bold" />

                    <TextView
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_marginBottom="4dp"
                        android:text="버전 : Beta 7.2 (android)"
                        android:textColor="@color/toss_text_main"
                        android:textSize="15sp" />

                    <TextView
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:lineSpacingExtra="4dp"
                        android:text="제작 : 경기대학교 E비즈니스시스템 6조 (방혁준, 남은지, 김민섭)"
                        android:textColor="@color/toss_text_sub"
                        android:textSize="8sp" />
                </LinearLayout>

                <com.google.android.material.button.MaterialButton
                    android:id="@+id/btn_clear_data"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:backgroundTint="#E5E7EB"
                    android:paddingVertical="14dp"
                    android:text="데이터 초기화"
                    android:textColor="@color/toss_text_sub"
                    android:textSize="15sp"
                    app:cornerRadius="20dp"
                    app:elevation="0dp" />
            </LinearLayout>
        </ScrollView>

        <!-- 공식/이론 설명 화면 -->
        <ScrollView
            android:id="@+id/layout_theory"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:background="@color/toss_bg"
            android:visibility="gone">

            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:orientation="vertical"
                android:padding="24dp">

                <ImageButton
                    android:id="@+id/btn_back_theory"
                    android:layout_width="32dp"
                    android:layout_height="32dp"
                    android:layout_marginTop="20dp"
                    android:layout_marginBottom="16dp"
                    android:background="?attr/selectableItemBackgroundBorderless"
                    android:src="@drawable/ic_back"
                    app:tint="@color/toss_text_main" />

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_marginBottom="24dp"
                    android:text="공식 및 이론 설명"
                    android:textColor="@color/toss_text_main"
                    android:textSize="26sp"
                    android:textStyle="bold" />

                <!-- FMEA란? -->
                <LinearLayout
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:layout_marginBottom="20dp"
                    android:background="@drawable/bg_card"
                    android:orientation="vertical"
                    android:padding="24dp">

                    <TextView
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_marginBottom="10dp"
                        android:text="FMEA(고장 형태 및 영향 분석)"
                        android:textColor="@color/toss_text_main"
                        android:textSize="16sp"
                        android:textStyle="bold" />

                    <TextView
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:lineSpacingExtra="6dp"
                        android:text="Failure Mode and Effects Analysis의 약자로, 제품이나 프로세스의 잠재적인 고장 모드를 식별하고, 이러한 고장이 고객에게 미치는 영향을 분석하여 위험을 평가하는 체계적인 방법론입니다. 심각도(Severity), 발생도(Occurrence), 검출도(Detection)를 평가하여 위험 우선순위(RPN)를 결정합니다."
                        android:textColor="@color/toss_text_sub"
                        android:textSize="14sp" />
                </LinearLayout>

                <!-- RPN이란? -->
                <LinearLayout
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:layout_marginBottom="20dp"
                    android:background="@drawable/bg_card"
                    android:orientation="vertical"
                    android:padding="24dp">

                    <TextView
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_marginBottom="10dp"
                        android:text="RPN(위험 우선순위 숫자)"
                        android:textColor="@color/toss_text_main"
                        android:textSize="16sp"
                        android:textStyle="bold" />

                    <TextView
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:lineSpacingExtra="6dp"
                        android:text="Risk Priority Number의 약자로, RPN = 심각도(S) x 발생도(O) x 검출도(D) 공식으로 계산됩니다. 이 점수를 통해 어떤 리스크를 먼저 처리해야 할지 우선순위를 정할 수 있습니다. 점수가 높을수록 더 시급하고 중요한 리스크를 의미합니다."
                        android:textColor="@color/toss_text_sub"
                        android:textSize="14sp" />
                </LinearLayout>

                <!-- 검출도 점수 역산 이유 -->
                <LinearLayout
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:layout_marginBottom="20dp"
                    android:background="@drawable/bg_card"
                    android:orientation="vertical"
                    android:padding="24dp">

                    <TextView
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_marginBottom="10dp"
                        android:text="검출도(D) 점수 역산 이유"
                        android:textColor="@color/toss_text_main"
                        android:textSize="16sp"
                        android:textStyle="bold" />

                    <TextView
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:lineSpacingExtra="6dp"
                        android:text="일반적으로 FMEA에서 검출도(Detection)는 점수가 높을수록 '검출이 어렵다'는 의미입니다. 하지만 AI 모델은 '검출하기 쉬운 정도'를 평가하는 경향이 있어 점수가 낮게 나올 수 있습니다. 이로 인해 RPN 총점이 왜곡되는 것을 방지하기 위해, (11 - AI 평가 점수) 공식을 적용하여 점수를 역산합니다. 이를 통해 '검출이 어려울수록' RPN이 높아지도록 보정합니다."
                        android:textColor="@color/toss_text_sub"
                        android:textSize="14sp" />
                </LinearLayout>
            </LinearLayout>
        </ScrollView>

    </FrameLayout>

    <com.google.android.material.bottomnavigation.BottomNavigationView
        android:id="@+id/bottom_navigation"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:background="#FFFFFF"
        app:menu="@menu/bottom_nav_menu"
        app:labelVisibilityMode="labeled"
        app:itemIconTint="@color/toss_red"
        app:itemTextColor="@color/toss_red"
        app:elevation="16dp"
        app:layout_constraintBottom_toBottomOf="parent"/>

</androidx.constraintlayout.widget.ConstraintLayout>